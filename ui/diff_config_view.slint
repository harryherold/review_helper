
import { GroupBox, LineEdit, Button, Button, VerticalBox, HorizontalBox, StandardTableView } from "std-widgets.slint";

import { Style } from "style.slint";
import { CommitPicker } from "commit_picker.slint";
import { CommitEditor, CommitPickerPosition } from "commit_editor.slint";
import { Diff, Repository } from "globals.slint";
import { ImageButton } from "image_button.slint";

export component DiffConfigView inherits VerticalLayout {
    spacing: Style.spacing;

    HorizontalLayout {
        spacing: Style.spacing;
        LineEdit {
            read-only: true;
            text: Repository.path;
        }

        ImageButton {
            width: Style.control_small_width;
            height: Style.control_height + Style.border_width * 2;
            source: @image-url("../assets/icons/folder_open.svg");
            clicked => {
                Repository.open();
            }
        }
    }

    HorizontalLayout {
        visible: Repository.path != "";
        spacing: Style.spacing;

        start-commit-editor := CommitEditor {
            picker-position: CommitPickerPosition.Left;
            commit: Diff.start_commit;
            height: Style.control_height + Style.border_width * 2;
            placeholder-text: "Start Commit SHA";
        }

        ImageButton {
            source: @image-url("../assets/icons/compare.svg");
            width: Style.control_small_width;
            height: Style.control_height + Style.border_width * 2;
            clicked => {
                Diff.diff-start-end(start-commit-editor.commit, end-commit-editor.commit);
            }
        }

        end-commit-editor := CommitEditor {
            picker-position: CommitPickerPosition.Right;
            commit: Diff.end_commit;
            height: Style.control_height + Style.border_width * 2;
            placeholder-text: "End Commit SHA";
        }
    }
}
