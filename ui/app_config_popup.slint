import { Popup } from "popup.slint";
import { Style } from "style.slint";
import { AppConfig } from "globals.slint";

import { VerticalBox, LineEdit, Button } from "std-widgets.slint";


export component AppConfigPopup inherits Popup {
    title: "Config";

    VerticalBox {
        alignment: space-between;

        GridLayout {
            spacing: Style.spacing;

            Row {
                Text {
                    font-size: 14px;
                    vertical-alignment: center;
                    text: "diff tool";
                }

                diff_tool_edit := LineEdit {
                    height: Style.control_height;
                    text <=> AppConfig.diff_tool;
                }
            }

            Row {
                Text {
                    font-size: 14px;
                    vertical-alignment: center;
                    text: "editor";
                }

                editor_edit := LineEdit {
                    height: Style.control_height;
                    text <=> AppConfig.editor;
                }
            }

            Row {
                Text {
                    font-size: 14px;
                    vertical-alignment: center;
                    text: "editor args";
                }

                editor_args_edit := LineEdit {
                    height: Style.control_height;
                    text <=> AppConfig.editor_args;
                }
            }
        }

        HorizontalLayout {
            spacing: Style.spacing;

            Button {
                text: "Cancel";
                clicked => {
                    root.close()
                }
            }

            Button {
                text: "Save";
                clicked => {
                    AppConfig.save();
                    root.close();
                }
            }
        }
    }
}
