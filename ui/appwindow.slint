import { Button, VerticalBox , HorizontalBox, LineEdit, ListView, CheckBox} from "std-widgets.slint";

export struct ReviewTodoItem  {
    text: string,
    isFixed: bool,
}

export component AppWindow inherits Window {
    in property <[ReviewTodoItem]> review-todo-item-model: [];
    callback review-todo-added(string);
    callback review-todo-text-changed(int, string);
    callback review-todo-is-fixed-toggled(int);
    callback review-todos-save-requested();
    callback review-todos-open-requested();

    width: 600px;
    height: 600px;

    VerticalBox {
        HorizontalBox {
            Button {
                text: "Open";
                clicked => {
                    root.review-todos-open-requested();
                }
            }
            Button {
                text: "Save";
                clicked => {
                    root.review-todos-save-requested();
                }
            }
        }
        LineEdit {
            placeholder-text: "Add comment here...";
            accepted => {
                if (self.text != "") {
                    root.review-todo-added(self.text);
                    self.text = "";
                }
            }
        }
        ListView {
            for data[idx] in review-todo-item-model : HorizontalBox {
                CheckBox {
                    checked: data.isFixed;
                    toggled => {
                        root.review-todo-is-fixed-toggled(idx);
                    }
                }
                LineEdit {
                    text: data.text;
                    accepted => {
                        root.review-todo-text-changed(idx, self.text);
                    }
                }
            }
        }
    }
}
